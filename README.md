# n8n node for Flowbot

Flowbot Community Nodes for n8n

## Overview

This package adds Flowbot integration to [n8n](https://n8n.io), the open-source automation platform.  
It lets you receive events from Flowbot and work with your support data (agents, tickets, etc.) directly inside n8n workflows — without writing custom HTTP requests every time.

With these nodes you can:
- Subscribe to Flowbot webhooks and trigger n8n instantly when something happens (new ticket, ticket update, etc.).
- Fetch agents / contacts from Flowbot.
- Create or update support tickets in Flowbot from any workflow.
- Pass Flowbot data forward to email, Slack, CRM (including Zoho CRM, Jira, Salesforce, HubSpot, etc.), and other business tools.

> Goal: make it easy for support / success teams to automate workflows around Flowbot without coding.

---

## Features

### Triggers
- **Flowbot Ticket Updated Trigger**  
  Fires in n8n when a ticket is updated in Flowbot (status change, new message, assignment, etc.).

- **Flowbot New Ticket Trigger**  
  Fires when a new ticket is created in Flowbot.

---

## Technical Documentation

### Integration Flow

This integration automates the creation and linking of a Flowbot tool with an agent for ticket creation and update.

#### How It Works

- **Create/Update Ticket:**  
  When you select "Create Ticket" or "Update Ticket" in n8n, you can press **Execute Step** to preview sample data fields.
  After specifying the agent list and tool name, pressing **Execute Step** again returns a structured JSON response with ticket details.

#### Authentication

Users must configure the Flowbot API credentials in n8n with the following required fields:
- **API Base URL**: The base URL of your Flowbot API instance (e.g., `https://api.flowbot.com` or your custom ngrok/domain URL)
- **API Key**: Your Flowbot API key for authentication

To set up credentials:
1. In n8n, go to **Credentials** and create a new **Flowbot** credential
2. Enter your **API Base URL** (without trailing slash, it will be added automatically)
3. Enter your **API Key**
4. Test the connection to ensure it works

The credentials are used by all Flowbot nodes to:
- Authenticate with your Flowbot backend
- Make requests to the correct API endpoint
- Verify webhook subscriptions

**Note:** This package does not use environment variables or config files. All configuration is managed through n8n credentials.

#### Under the Hood

- **Webhook Subscription:**  
  When you subscribe via the trigger node, the backend creates a webhook subscription linking your Flowbot tool and webhook URL.
- **Event Delivery:**  
  When an agent is called during a workflow (e.g., incoming call or message), and a ticket is created or updated, the backend sends event data to your n8n workflow.
- **Verification:**  
  The webhook includes internal verification.  
  Only requests with the correct authentication header and required fields generated by Flowbot are accepted.

---

## Webhook Request/Response Examples

### Ticket Creation

**Request Example:**
```json
{
  "contact": "TestContact",
  "email_contact": "test@gmail.com",
  "subject": "Ticket created",
  "description": "Updated"
}
```

### Ticket Update

**Request Example:**
```json
{
  "ticket_number": "0425",
  "contact": "TestContact",
  "email_contact": "test@gmail.com",
  "subject": "Ticket updated",
  "description": "Updated"
}
```

### Headers for Verification

Flowbot webhooks require authentication headers.
Only requests with valid headers and payload structure are processed by the n8n node.

---

## Typical Use Cases

- Auto-create a Flowbot ticket from an inbound email or web form.
- Notify Slack/Telegram when a VIP ticket changes to `Escalated`.
- Auto-assign new tickets to the "on-duty" agent and log that to Google Sheets.
- Send conversation transcripts to CRM systems such as Zoho CRM, Jira, Salesforce, HubSpot, or to a data warehouse.
- Sync ticket updates with external project management tools (e.g., Jira) or customer databases (e.g., Zoho CRM).

---

## Requirements

To use these nodes you need:
1. **A Flowbot account**
2. **API Base URL** - The URL where your Flowbot API is hosted (e.g., `https://api.flowbot.com` or your ngrok URL)
3. **API Key** - Generated in your Flowbot account settings  
4. **Self-hosted n8n** or n8n cloud instance that allows installing community nodes from npm

Node.js 18+ and n8n v1.0.0+ are required for these community nodes.

---

## Configuration

### Setting up Flowbot Credentials

1. In your n8n instance, go to **Credentials** in the left sidebar
2. Click **Add Credential** and search for **Flowbot**
3. Fill in the required fields:
   - **API Base URL**: Your Flowbot API endpoint (e.g., `https://api.flowbot.com` or `https://your-domain.ngrok-free.app`)
   - **API Key**: Your Flowbot API key
4. Click **Save** and test the connection

All Flowbot nodes in your workflows will use these credentials automatically.

**Important Notes:**
- Do not include a trailing slash in the API Base URL - it will be added automatically
- The API Base URL should be a valid HTTPS endpoint
- No environment variables or `.env` files are needed - all configuration is managed through n8n credentials

---

## Installation

### Option 1: Install via n8n UI (self-hosted n8n)
1. Open your n8n instance.
2. Go to **Settings → Community Nodes**.
3. Add the package name:  
   `n8n-nodes-flowbot`
4. Confirm installation and restart if n8n asks.

### Option 2: Install manually with npm
If you run n8n from source / Docker with custom extensions:

```bash
cd /path/to/your/n8n
npm install n8n-nodes-Flowbot
```
