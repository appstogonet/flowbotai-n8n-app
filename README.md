# n8n node for FlowbotAI

FlowbotAI Community Nodes for n8n

## Overview

This package adds FlowbotAI integration to [n8n](https://n8n.io), the open-source automation platform.  
It lets you receive events from FlowbotAI and work with your support data (agents, tickets, etc.) directly inside n8n workflows — without writing custom HTTP requests every time.

With these nodes you can:
- Subscribe to FlowbotAI webhooks and trigger n8n instantly when something happens (new ticket, ticket update, etc.).
- Fetch agents / contacts from FlowbotAI.
- Create or update support tickets in FlowbotAI from any workflow.
- Pass FlowbotAI data forward to email, Slack, CRM (including Zoho CRM, Jira, Salesforce, HubSpot, etc.), and other business tools.

> Goal: make it easy for support / success teams to automate workflows around FlowbotAI without coding.

---

## Features

### Triggers
- **Flowbot Ticket Updated Trigger**  
  Fires in n8n when a ticket is updated in FlowbotAI (status change, new message, assignment, etc.).

- **FlowbotAI New Ticket Trigger**  
  Fires when a new ticket is created in FlowbotAI.

---

## Technical Documentation

### Integration Flow

This integration automates the creation and linking of a FlowbotAI tool with an agent for ticket creation and update.

#### How It Works

- **Create/Update Ticket:**  
  When you select "Create Ticket" or "Update Ticket" in n8n, you can press **Execute Step** to preview sample data fields.
  After specifying the agent list and tool name, pressing **Execute Step** again returns a structured JSON response with ticket details.

#### Authentication

Users must configure the FlowbotAI API credentials in n8n with the following required field:
- **API Key**: Your FlowbotAI API key for authentication

To set up credentials:
1. In n8n, go to **Credentials** and create a new **FlowbotAI** credential
2. Enter your **API Key**
3. Test the connection to ensure it works

The credentials are used by all FlowbotAI nodes to:
- Authenticate with your FlowbotAI backend
- Verify webhook subscriptions

#### Under the Hood

- **Webhook Subscription:**  
  When you subscribe via the trigger node, the backend creates a webhook subscription linking your FlowbotAI tool and webhook URL.
- **Event Delivery:**  
  When an agent is called during a workflow (e.g., incoming call or message), and a ticket is created or updated, the backend sends event data to your n8n workflow.
- **Verification:**  
  The webhook includes internal verification.  
  Only requests with the correct authentication header and required fields generated by FlowbotAI are accepted.

---

## Webhook Request/Response Examples

### Ticket Creation

**Request Example:**
```json
{
  "contact": "TestContact",
  "email_contact": "test@gmail.com",
  "subject": "Ticket created",
  "description": "Updated"
}
```

### Ticket Update

**Request Example:**
```json
{
  "ticket_number": "0425",
  "contact": "TestContact",
  "email_contact": "test@gmail.com",
  "subject": "Ticket updated",
  "description": "Updated"
}
```

### Headers for Verification

FlowbotAI webhooks require authentication headers.
Only requests with valid headers and payload structure are processed by the n8n node.

---

## Typical Use Cases

- Auto-create a FlowbotAI ticket from an inbound email or web form.
- Notify Slack/Telegram when a VIP ticket changes to `Escalated`.
- Auto-assign new tickets to the "on-duty" agent and log that to Google Sheets.
- Send conversation transcripts to CRM systems such as Zoho CRM, Jira, Salesforce, HubSpot, or to a data warehouse.
- Sync ticket updates with external project management tools (e.g., Jira) or customer databases (e.g., Zoho CRM).

---

## Requirements

To use these nodes you need:
1. **A FlowbotAI account**
2. **API Key** - Generated in your FlowbotAI account settings  
3. **Self-hosted n8n** or n8n cloud instance that allows installing community nodes from npm

Node.js 18+ and n8n v1.0.0+ are required for these community nodes.

---

## Configuration

### Setting up FlowbotAI Credentials

1. In your n8n instance, go to **Credentials** in the left sidebar
2. Click **Add Credential** and search for **FlowbotAI**
3. Fill in the required field:
  - **API Key**: Your FlowbotAI API key
4. Click **Save** and test the connection

All FlowbotAI nodes in your workflows will use these credentials automatically.

**Important Notes:**
- No environment variables or `.env` files are needed - all configuration is managed through n8n credentials

---

## Installation

### Option 1: Install via n8n UI (self-hosted n8n)
1. Open your n8n instance.
2. Go to **Settings → Community Nodes**.
3. Add the package name:  
   `n8n-nodes-flowbotai`
4. Confirm installation and restart if n8n asks.

### Option 2: Install manually with npm
If you run n8n from source / Docker with custom extensions:

```bash
cd /path/to/your/n8n
npm install n8n-nodes-flowbotai
```
